{"version":3,"file":"static/webpack/static/development/pages/index.js.d27b7bec63dd47006a01.hot-update.js","sources":["webpack:///./node_modules/@babel/runtime-corejs2/core-js/object/define-properties.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/object/get-own-property-descriptors.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/object/get-own-property-symbols.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js","webpack:///./node_modules/core-js/library/fn/object/define-properties.js","webpack:///./node_modules/core-js/library/fn/object/get-own-property-descriptors.js","webpack:///./node_modules/core-js/library/fn/object/get-own-property-symbols.js","webpack:///./node_modules/core-js/library/modules/_own-keys.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-properties.js","webpack:///./node_modules/core-js/library/modules/es7.object.get-own-property-descriptors.js","webpack:///./pages/index.js"],"sourcesContent":["module.exports = require(\"core-js/library/fn/object/define-properties\");","module.exports = require(\"core-js/library/fn/object/get-own-property-descriptors\");","module.exports = require(\"core-js/library/fn/object/get-own-property-symbols\");","import _Object$defineProperty from \"../../core-js/object/define-property\";\nexport default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    _Object$defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","require('../../modules/es6.object.define-properties');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperties(T, D) {\n  return $Object.defineProperties(T, D);\n};\n","require('../../modules/es7.object.get-own-property-descriptors');\nmodule.exports = require('../../modules/_core').Object.getOwnPropertyDescriptors;\n","require('../../modules/es6.symbol');\nmodule.exports = require('../../modules/_core').Object.getOwnPropertySymbols;\n","// all object keys, includes non-enumerable and symbols\nvar gOPN = require('./_object-gopn');\nvar gOPS = require('./_object-gops');\nvar anObject = require('./_an-object');\nvar Reflect = require('./_global').Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {\n  var keys = gOPN.f(anObject(it));\n  var getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};\n","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","// https://github.com/tc39/proposal-object-getownpropertydescriptors\nvar $export = require('./_export');\nvar ownKeys = require('./_own-keys');\nvar toIObject = require('./_to-iobject');\nvar gOPD = require('./_object-gopd');\nvar createProperty = require('./_create-property');\n\n$export($export.S, 'Object', {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIObject(object);\n    var getDesc = gOPD.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var i = 0;\n    var key, desc;\n    while (keys.length > i) {\n      desc = getDesc(O, key = keys[i++]);\n      if (desc !== undefined) createProperty(result, key, desc);\n    }\n    return result;\n  }\n});\n","import React, { useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport Head from \"../components/head\";\n\n// https://codesandbox.io/s/creating-visualizations-with-d3-and-react-3ofdx\nimport { Stage } from \"./../components/stage\";\nimport Sidebar from \"./../components/Sidebar\";\nimport { ZoomContainer } from \"./../components/ZoomContainer\";\nimport WorldMap from \"./../components/Map\";\n\n// https://stackoverflow.com/a/30707423\nfunction jsonToQueryString(json) {\n  return (\n    \"?\" +\n    Object.keys(json)\n      .map(function(key) {\n        return encodeURIComponent(key) + \"=\" + encodeURIComponent(json[key]);\n      })\n      .join(\"&\")\n  );\n}\n\nconst Home = ({ randomPlace }) => {\n  const router = useRouter();\n  const [loading, setLoading] = useState(true);\n  const [username, setUsername] = useState(undefined);\n  const [data, onSubmit] = useState({ distance: null });\n  const handleForm = async () => {\n    const rawResponse = await fetch(\n      `https://ionized-protoceratops.glitch.me/addScore${jsonToQueryString({\n        username: username,\n        score: data.distance,\n        cho: data.cho,\n        lat: data.userClickCoordinations[0],\n        long: data.userClickCoordinations[1]\n      })}`,\n      {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        }\n      }\n    );\n    const content = await rawResponse.json();\n\n    if (content.message === \"success\") {\n      onSubmit({ distance: null, submitted: true });\n      return router.replace(\"/\");\n    } else {\n      return onSubmit({ ...data });\n    }\n  };\n\n  return (\n    <main className=\"container\">\n      <Head title=\"Home\" />\n      <Sidebar\n        data={data}\n        setLoading={setLoading}\n        loading={loading}\n        randomPlace={randomPlace}\n        handleForm={handleForm}\n        username={username}\n        setUsername={setUsername}\n      />\n      <Stage width={data.distance ? \"100%\" : \"1020px\"} height={400}>\n        <ZoomContainer data={data} finished={data.distance !== null}>\n          <WorldMap\n            data={data}\n            onSubmit={data => onSubmit(data)}\n            marker={randomPlace}\n            setLoading={loading => setLoading(loading)}\n          />\n        </ZoomContainer>\n      </Stage>\n\n      <style global jsx>\n        {`\n          .container {\n            display: grid;\n            grid-template-columns: ${data.distance ? \"2fr\" : \"1fr\"} 4fr;\n          }\n          .overlay {\n            padding: 12px;\n            overflow: hidden;\n            display: flex;\n            flex-direction: column;\n          }\n          .content {\n            background: white;\n          }\n          img {\n            height: 200px;\n          }\n          body {\n            margin: 0;\n            padding: 0;\n          }\n        `}\n      </style>\n    </main>\n  );\n};\n\nconst API_URL =\n  \"https://api.data.netwerkdigitaalerfgoed.nl/datasets/ivo/NMVW/services/NMVW-15/sparql\";\n\nconst API_QUERY = `\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX dc: <http://purl.org/dc/elements/1.1/>\nPREFIX dct: <http://purl.org/dc/terms/>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX edm: <http://www.europeana.eu/schemas/edm/>\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX hdlh: <https://hdl.handle.net/20.500.11840/termmaster>\nPREFIX wgs84: <http://www.w3.org/2003/01/geo/wgs84_pos#>\nPREFIX geo: <http://www.opengis.net/ont/geosparql#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX gn: <http://www.geonames.org/ontology#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n\n# e1n foto per land (met type, img, lat en long van de plaats\nSELECT *\nWHERE {\n# vind alleen foto's\n<https://hdl.handle.net/20.500.11840/termmaster1397> skos:narrower* ?type .\n?type skos:prefLabel ?typeLabel .\n?cho edm:object ?type .\n\n# ?cho dc:title ?title .\n?cho edm:isShownBy ?img .\n\n# vind bij de objecten het land\n?cho dct:spatial ?place .\n?place skos:exactMatch/gn:parentCountry ?land .\n# ?place skos:prefLabel ?placeName .\n?land gn:name ?landLabel .\n\n# vind bij de plaats van de foto de lat/long\n?place skos:exactMatch/wgs84:lat ?lat .\n?place skos:exactMatch/wgs84:long ?long .\n\n}\nOFFSET RAND() * 5\n#100000\nLIMIT 1\n`;\n\nHome.getInitialProps = async function() {\n  const res = await fetch(\n    `${API_URL}?query=${encodeURIComponent(API_QUERY)}&format=json`\n  );\n  const apiData = await res.json();\n\n  return {\n    randomPlace: apiData.results.bindings\n  };\n};\n\nexport default Home;\n"],"mappings":";;;;;;;;;AAAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACdA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;;;;;;;;;;;;ACDA;AACA;;;;;;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACTA;AACA;AACA;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAIA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAIA;AAAA;AAJA;AAAA;AACA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AAFA;AAFA;AACA;AAVA;AACA;AADA;AAAA;AACA;AADA;AAiBA;AACA;AAlBA;AAAA;AAAA;AAAA;AACA;AAmBA;AAAA;AAAA;AAAA;AACA;AArBA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AA0BA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAbA;AAAA;AAAA;AAAA;AAgDA;AACA;AACA;AAGA;AA0CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AACA;AADA;AAIA;AAJA;AAOA;AADA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;;;;A","sourceRoot":""}